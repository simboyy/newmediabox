{"version":3,"sources":["api/sendmail/send.js"],"names":["send","nodemailer","require","sgTransport","htmlToText","req","options","auth","api_key","process","env","SENDGRID_APIKEY","mailer","createTransport","sendMail","error","info","res","status","err","console","log","success"],"mappings":"AAAA;;;;;QAQgBA,I,GAAAA,I;AALhB,IAAIC,aAAaC,QAAQ,YAAR,CAAjB;AACA,IAAIC,cAAcD,QAAQ,+BAAR,CAAlB;AACA;AACA,IAAIE,aAAaF,QAAQ,yBAAR,EAAmCE,UAApD;;AAEO,SAASJ,IAAT,CAAcK,GAAd,EAAmB;AACtB,QAAIC,UAAU;AACVC,cAAM;AACFC,qBAASC,QAAQC,GAAR,CAAYC;AADnB;AADI,KAAd;;AAMA,QAAIC,SAASX,WAAWY,eAAX,CAA2BV,YAAYG,OAAZ,CAA3B,CAAb;AACAM,WAAOE,QAAP,CAAgBT,GAAhB,EAAqB,UAASU,KAAT,EAAgBC,IAAhB,EAAqB;;AAEtC,YAAIC,MAAM,EAAV;AACA,YAAGF,KAAH,EAAS;AACLE,kBAAM,EAACC,QAAQ,GAAT,EAAcC,KAAKJ,KAAnB,EAAN;AACAK,oBAAQC,GAAR,CAAYN,KAAZ;AACH,SAHD,MAGK;AACDE,kBAAM,EAACC,QAAQ,GAAT,EAAcI,SAAS,IAAvB,EAAN;AACAF,oBAAQC,GAAR,CAAYJ,GAAZ;AACAG,oBAAQC,GAAR,CAAYL,IAAZ;AACH;AACD,eAAOC,GAAP;AACH,KAZD;AAaH","file":"send.js","sourcesContent":["'use strict';\n\n\nvar nodemailer = require('nodemailer');\nvar sgTransport = require('nodemailer-sendgrid-transport');\n// html to text plugin \nvar htmlToText = require('nodemailer-html-to-text').htmlToText;\n\nexport function send(req) {\n    var options = {\n        auth: {\n            api_key: process.env.SENDGRID_APIKEY\n        }\n    }\n\n    var mailer = nodemailer.createTransport(sgTransport(options));\n    mailer.sendMail(req, function(error, info){\n\n        var res = {}\n        if(error){\n            res = {status: 408, err: error}\n            console.log(error);\n        }else{\n            res = {status: 200, success: true}\n            console.log(res);\n            console.log(info);\n        }\n        return res\n    })\n}\n\n"]}